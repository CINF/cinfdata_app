#:kivy 1.0
#:import time time

<MainCarousel>:
    id: maincar
    index: 1
    Label:
        id: lab1
        text: "First select a plot"
    FloatLayout:
        Scatter:
            Label:
                text: "2"
    PageSelection:
        id: page_selection

<PageSelection>:
    orientation: 'vertical'

<PlotSelectButton>:
    group: 'plots'
    size_hint: 1, None
    
<DatePlotOptions>:
    id: dateplot_options
    orientation: 'vertical'
    AccordionItem:
        id: datedate
        title: 'General'
        BoxLayout:
            id: vbox
            orientation: 'vertical'
            BoxLayout:
                size_hint: 1, None
                Label:
                    text: 'Shortcuts:'
                    font_size: 20
                    size_hint: None, None
                    width: 120
                Button:
                    text: '1d'
                    on_release: dateplot_options.set_ago(24 * 60 * 60)
                Button:
                    text: '3h'
                    on_release: dateplot_options.set_ago(3 * 60 * 60)
                Button:
                    text: '1h'
                    on_release: dateplot_options.set_ago(60 * 60)
                Button:
                    text: '10m'
                    on_release: dateplot_options.set_ago(10 * 60)
            BoxLayout:
                size_hint: 1, None
                Label:
                    text: 'To:'
                    font_size: 20
                    size_hint: None, None
                    width: 60
                Label:
                    text: 'Active:'
                    size_hint: None, None
                CheckBox:
                    id: to_active
                    active: True
                    size_hint: None, None
                    on_active: dateplot_options.set_to_state(self.active)
            BoxLayout:
                id: to
                size_hint: 1, None
                Spinner:
                    id: to_year
                    name: 'to_year'
                    #disabled: to_active.active
                    text: str(time.strftime('%Y'))
                    values: [str(v) for v in range(int(time.strftime('%Y')), 2008, -1)]
                    on_text: dateplot_options.change(self, self.text)
                Label:
                    text: '-'
                Spinner:
                    id: to_month
                    name: 'to_month'
                    text: str(int(time.strftime('%m')))
                    values: [str(val) for val in range(12, 0, -1)]
                    on_text: dateplot_options.change(self, self.text)
                Label:
                    text: '-'
                Spinner:
                    id: to_day
                    name: 'to_day'
                    text: str(int(time.strftime('%d')))
                    values: [str(val) for val in range(31, 0, -1)]
                    on_text: dateplot_options.change(self, self.text)
                Label:
                    text: ' '
                Spinner:
                    id: to_hour
                    name: 'to_hour'
                    text: str(int(time.strftime('%H')))
                    values: [str(val) for val in range(23, -1, -1)]
                    on_text: dateplot_options.change(self, self.text)
                Label:
                    text: ':'
                Spinner:
                    id: to_minute
                    name: 'to_minute'
                    text: str(int(time.strftime('%M')))
                    values: [str(val) for val in range(55, -1, -5)]
                    on_text: dateplot_options.change(self, self.text)
            BoxLayout:
                size_hint: 1, None
                Label:
                    text: 'From'
                    font_size: 20
                    size_hint: None, None
                    width: 60
            BoxLayout:
                size_hint: 1, None
                Spinner:
                    id: from_year
                    name: 'from_year'
                    text: str(time.strftime('%Y', time.localtime(time.time() - 3600)))
                    values: [str(v) for v in range(int(time.strftime('%Y')), 2008, -1)]
                    on_text: dateplot_options.change(self, self.text)
                Label:
                    text: '-'
                Spinner:
                    id: from_month
                    name: 'from_month'
                    text: str(int(time.strftime('%m', time.localtime(time.time() - 3600))))
                    values: [str(val) for val in range(12, 0, -1)]
                    on_text: dateplot_options.change(self, self.text)
                Label:
                    text: '-'
                Spinner:
                    id: from_day
                    name: 'from_day'
                    text: str(int(time.strftime('%d', time.localtime(time.time() - 3600))))
                    values: [str(val) for val in range(31, 0, -1)]
                    on_text: dateplot_options.change(self, self.text)
                Label:
                    text: ' '
                Spinner:
                    id: from_hour
                    name: 'from_hour'
                    text: str(int(time.strftime('%H', time.localtime(time.time() - 3600))))
                    values: [str(val) for val in range(23, -1, -1)]
                    on_text: dateplot_options.change(self, self.text)
                Label:
                    text: ':'
                Spinner:
                    id: from_minute
                    name: 'from_minute'
                    text: str(int(time.strftime('%M', time.localtime(time.time() - 3600))) )
                    values: [str(val) for val in range(55, -1, -5)]
                    on_text: dateplot_options.change(self, self.text)

<NoNetworkError>:
    title: 'No Network'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Unable to get data from the servcinf site. Check your network connection and credentials.'
        Button:
            text: 'Ok'
            on_press: root.dismiss()